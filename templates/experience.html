[[extend 'layout.html']]
<div class="container is-centered is-max-widescreen">
    <div class="section">
        <h1 class="title">Vaccine Experience</h1>
       [[if logged_in % 2==1:]]
          <h2 class="subtitle">Reviews submitted by <strong class="has-text-info">[[=user["first_name"] ]] [[=user["last_name"] ]]</strong></h2>
          <table class="table is-striped is-fullwidth">
          <tr>
            <th>Vaccine Type</th>
            <th>Vaccination Site</th>
            <th>Rating</th>
            <th>Feedback</th>
            <th>Day Reported</th>
            <th>Edit</th>
            <tH>Delete</tH>
          </tr>
          [[for row in review_info:]]
          <!-Ideally Users should have no more than 2, but could probably build off this and use for view reviews->
          <tr>
              <td>[[=row["vaccine_type"] ]]</td>
              <td>[[=row["site_address"] ]]</td>
              <td>[[=row["rating"] ]]</td>
              <td>[[=row["feedback"] ]]</td>
              <td>[[=row["submitted_time"] ]]</td>
              <td>
                <a class="button is-info" href="[[=URL('edit_review', row["id"] , signer=url_signer)]]">
                   <i class="fa fa-fw fa-edit"></i>
                </a>
              </td>
              <td>
                <a class="button is-danger" href="[[=URL('delete_review', row["id"] , signer=url_signer)]]">
                   <i class="fa fa-fw fa-trash"></i>
                </a>
              </td>
          </tr>
          [[pass]]
       </table>
       [[else:]]
       [[pass]]
        <a class="button is-primary" href="[[=URL('index')]]">
          <span>Back</span>
       </a>
        <a class="button is-primary" href="[[=URL('submit_review')]]">
          <span>Submit Review</span>
        </a>
        <a class="button is-primary" href="[[=URL('view_reviews')]]">
          <span>View Reviews</span>
        </a>
    </div>
</div>

<table v-if="page_initialized" class="table is-fullwidth is-narrow is-hoverable">
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Address</th>
                            <th>City</th>
                            <th>Distance (miles)</th>
                            <th>In Stock</th>
                            <th>Rating</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="r in rows">
                            <td>{{r.provider}}</td>
                            <td><a target='_blank' :href="r.addressLink"> {{r.address}} </a></td>
                            <td>{{r.city}}</td>
                            <td>{{r.distance}}</td>
                            <td>{{r.availability}}</td>
                            <td>
                                <span v-for="star_idx in [1, 2, 3, 4, 5]">
                                  <i v-if="star_idx <= r.rating" class="fa fa-star fa-xs"></i>
                                  <i v-if="star_idx > r.rating" class="fa fa-star-o fa-xs"></i>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
